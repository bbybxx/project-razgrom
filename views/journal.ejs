<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–æ–µ–≤–æ–π –ñ—É—Ä–Ω–∞–ª - –ü—Ä–æ–µ–∫—Ç –†–∞–∑–≥—Ä–æ–º</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <%- include('partials/sidebar') %>
    
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="/">–ü–†–û–ï–ö–¢ –†–ê–ó–ì–†–û–ú</a>
            </div>
            <div class="nav-menu">
                <a href="/dashboard" class="nav-link">–¶–ï–ù–¢–†</a>
                <a href="/profile/<%= user.username %>" class="nav-link">–ú–û–ô –ü–†–û–§–ò–õ–¨</a>
                <a href="/journal" class="nav-link active">–ë–û–ï–í–û–ô –ñ–£–†–ù–ê–õ</a>
                <a href="/rating" class="nav-link">–†–ï–ô–¢–ò–ù–ì</a>
                <a href="/fun" class="nav-link">–†–ê–ó–í–õ–ï–ß–ï–ù–ò–Ø</a>
                <a href="/chronicle" class="nav-link">–•–†–û–ù–ò–ö–ê</a>
                <a href="/logout" class="nav-link nav-logout">–í–´–•–û–î</a>
            </div>
        </nav>

        <header class="journal-header">
            <h1>–ë–û–ï–í–û–ô –ñ–£–†–ù–ê–õ</h1>
            <p class="journal-subtitle">/// –•–†–û–ù–ò–ö–ê –°–û–ë–´–¢–ò–ô –ò –ú–´–°–õ–ï–ô –ë–û–ô–¶–û–í ///</p>
        </header>

        <main class="journal-main">
            <div class="message-form-section">
                <div class="form-container">
                    <h2>–ù–û–í–ê–Ø –ó–ê–ü–ò–°–¨</h2>
                    <form method="POST" action="/journal" class="message-form">
                        <div class="form-group">
                            <textarea name="message" rows="4" 
                                      placeholder="–ü–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏, –ø–ª–∞–Ω–∞–º–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏..." 
                                      required></textarea>
                        </div>
                        
                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" name="anonymous">
                                <span class="checkmark"></span>
                                –û–¢–ü–†–ê–í–ò–¢–¨ –ê–ù–û–ù–ò–ú–ù–û
                            </label>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">–û–¢–ü–†–ê–í–ò–¢–¨ –°–û–û–ë–©–ï–ù–ò–ï</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="messages-section">
                <h2>–ê–†–•–ò–í –°–û–û–ë–©–ï–ù–ò–ô</h2>
                
                <% if (messages.length > 0) { %>
                    <div class="messages-list">
                        <% messages.forEach(message => { %>
                            <div class="message-item">
                                <div class="message-header">
                                    <div class="message-author">
                                        <% if (message.author) { %>
                                            <a href="/profile/<%= message.author %>" class="author-link">
                                                <%= message.author %>
                                            </a>
                                        <% } else { %>
                                            <span class="anonymous-author">–ù–ï–ò–ó–í–ï–°–¢–ù–´–ô –ë–û–ï–¶</span>
                                        <% } %>
                                    </div>
                                    <div class="message-date">
                                        <%= new Date(message.timestamp).toLocaleString('ru-RU') %>
                                    </div>
                                </div>
                                
                                <div class="message-content">
                                    <%= message.text %>
                                </div>
                                
                                <div class="message-footer">
                                    <div class="message-id">ID: <%= message.id %></div>
                                </div>
                            </div>
                        <% }); %>
                    </div>
                <% } else { %>
                    <div class="no-messages">
                        <div class="no-messages-icon">üìù</div>
                        <h3>–ñ–£–†–ù–ê–õ –ü–£–°–¢</h3>
                        <p>–°—Ç–∞–Ω—å –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–ª—É–±–∞!</p>
                    </div>
                <% } %>
            </div>
        </main>

        <div class="journal-rules">
            <h3>–ü–†–ê–í–ò–õ–ê –í–ï–î–ï–ù–ò–Ø –ñ–£–†–ù–ê–õ–ê:</h3>
            <ul>
                <li>–ë—É–¥—å —á–µ—Å—Ç–µ–Ω –≤ —Å–≤–æ–∏—Ö –∑–∞–ø–∏—Å—è—Ö</li>
                <li>–£–≤–∞–∂–∞–π –º–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö –±–æ–π—Ü–æ–≤</li>
                <li>–ê–Ω–æ–Ω–∏–º–Ω–æ—Å—Ç—å - —Ç–≤–æ–µ –ø—Ä–∞–≤–æ</li>
                <li>–ü–æ–º–Ω–∏: –∑–¥–µ—Å—å –Ω–µ—Ç —Ü–µ–Ω–∑—É—Ä—ã, –Ω–æ –µ—Å—Ç—å –±—Ä–∞—Ç—Å—Ç–≤–æ</li>
            </ul>
        </div>
    </div>

    <script src="/js/main.js"></script>
</body>
</html>
